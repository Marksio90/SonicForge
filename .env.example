# ===========================================
# SonicForge 2.0 — Environment Configuration
# The Autonomous Broadcast Core (Open-Source Edition)
# ===========================================
# Copy this file to .env and fill in your values
# cp .env.example .env

# Application
ENVIRONMENT=development
DEBUG=true
SECRET_KEY=change-me-to-a-random-string

# Database (managed by Docker Compose)
# Use "postgres" as host when running via docker-compose, "localhost" for local dev
DATABASE_URL=postgresql+asyncpg://sonicforge:sonicforge@postgres:5432/sonicforge
DATABASE_URL_SYNC=postgresql://sonicforge:sonicforge@postgres:5432/sonicforge
DB_POOL_SIZE=30
DB_MAX_OVERFLOW=20
DB_POOL_RECYCLE=1800

# Redis (managed by Docker Compose)
# Use "redis" as host when running via docker-compose, "localhost" for local dev
REDIS_URL=redis://redis:6379/0
REDIS_MAX_CONNECTIONS=50
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2

# MinIO / S3 (managed by Docker Compose)
# Use "minio" as host when running via docker-compose, "localhost" for local dev
S3_ENDPOINT=http://minio:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin

# ===========================================
# === Open-Source AI Music Generation ===
# ===========================================
# MusicGen (Meta AudioCraft) — PRIMARY music engine, runs locally on GPU
# No API keys needed! Just requires a GPU with >= 16GB VRAM
MODEL_SOURCE=local
MUSICGEN_MODEL_VERSION=facebook/musicgen-stereo-large
MUSICGEN_API_URL=http://musicgen:8001
MUSICGEN_SEGMENT_DURATION=30
MUSICGEN_SEGMENTS_COUNT=4
MUSICGEN_CONTINUATION_OVERLAP=5

# RunPod (optional — remote GPU when local GPU unavailable)
# https://runpod.io — pay-per-second GPU rental
RUNPOD_API_KEY=
RUNPOD_ENDPOINT_ID=

# === Legacy Paid APIs (optional fallback) ===
# Set keys to enable — system works fully without them
SUNO_API_KEY=
SUNO_API_URL=https://api.suno.ai/v1
UDIO_API_KEY=
UDIO_API_URL=https://api.udio.com/v1
ELEVENLABS_API_KEY=
REPLICATE_API_TOKEN=

# ===========================================
# === Open-Source Visuals ===
# ===========================================
# Stable Diffusion via ComfyUI — runs locally on GPU
STABLE_DIFFUSION_URL=http://comfyui:7860
SD_MODEL=stabilityai/stable-diffusion-xl-base-1.0
ANIMATEDIFF_ENABLED=true
VISUAL_LOOP_DURATION=8

# ===========================================
# === LLM APIs ===
# ===========================================
# OpenAI (PRIMARY — powers prompt crafting, trend analysis)
# https://platform.openai.com
OPENAI_API_KEY=

# Anthropic Claude (legacy fallback only): https://console.anthropic.com
ANTHROPIC_API_KEY=

# LLM Provider: "openai" (primary) or "anthropic" (legacy fallback)
LLM_PROVIDER=openai
LLM_MODEL=gpt-4o
LLM_MODEL_FAST=gpt-4o-mini
LLM_TEMPERATURE=0.85
LLM_MAX_RETRIES=3

# ===========================================
# === Audio Mastering ===
# ===========================================
MASTERING_TARGET_LUFS=-14.0
MASTERING_TRUE_PEAK=-1.0
MASTERING_STEREO_WIDTH=1.2

# ===========================================
# === YouTube Streaming ===
# ===========================================
YOUTUBE_STREAM_KEY=
YOUTUBE_RTMP_URL=rtmps://a.rtmp.youtube.com/live2
YOUTUBE_API_KEY=
YOUTUBE_CHANNEL_ID=

# === Multi-Platform RTMP (via NGINX proxy) ===
RTMP_PROXY_ENABLED=false
RTMP_PROXY_URL=rtmp://rtmp-proxy:1935/live
TWITCH_STREAM_KEY=
KICK_STREAM_KEY=

# === Streaming Settings ===
STREAM_BITRATE_VIDEO=6000k
STREAM_BITRATE_AUDIO=320k
STREAM_RESOLUTION=1920x1080
STREAM_FPS=30
CROSSFADE_DURATION=12
BUFFER_MIN_TRACKS=20

# Quality Gate
QUALITY_THRESHOLD=8.5
MAX_GENERATION_ATTEMPTS=5
VARIANTS_PER_CONCEPT=3

# === Backup Streaming ===
# Gyre.pro (~$25/month): https://gyre.pro
GYRE_API_KEY=
GYRE_ENABLED=false

# Restream.io (multi-platform): https://restream.io
RESTREAM_ENABLED=false
RESTREAM_KEY=

# === Monitoring & Notifications ===
# Telegram Bot: https://t.me/BotFather
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Sentry: https://sentry.io
SENTRY_DSN=

# === Dashboard ===
DASHBOARD_URL=http://localhost:3000
CORS_ORIGINS=["http://localhost:3000","http://localhost:8000"]
